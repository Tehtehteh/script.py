<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" class="glyphicon glyphicon-file" />
    <link rel="stylesheet" href="{{ static('css/bootstrap.min.css') }}" type = "text/css"/>
    <link rel="stylesheet" href = "{{ static ('css/my.css')}}" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://malsup.github.io/jquery.corner.js"></script>
    <script type="text/javascript" src="{{ static('js/bootstrap.min.js') }}"></script>
    <script type="text/javascript" src="{{ static('js/Usersfile.js') }}"></script>
    <script src="https://use.fontawesome.com/525d12f3f5.js"></script>
    <title>Мониторинг</title>
</head>
<body>
    <div class="container container-fluid">
        <div class="panel panel-default">
                {% if not error|length %}
                <div class="panel-heading">
                    <button class="btn btn-default" onclick="return location.href='/'">
                        <div class="arrow-left"></div>
                    </button>
                    <span>Статистика файлов <strong> {{user}}</strong></span>
                </div>
                {% else %}
                <div class="panel-heading">
                    <p> Система мониторинга файлов пользователей.</p>
                </div>
                {% endif %}
                <div class="panel-body">
                    {% if not error|length %}
                    <div class="row my-row">
                        <div class="col-sm-3">
                            <ul class="list-group">

                              <li class="list-group-item">
                                Всего файлов
                                  <span style="float: right">
                                    <span class="badge my-badge badge-count"></span>
                                     <em class="fa fa-refresh refresh"></em>
                                  </span>
                              </li>
                                {% for extension in extensions %}
                                <li class="list-group-item">Файлов с расширением {{ extension }}
                                <span class="badge">{{ extensions[extension] }}</span>
                                </li>
                                {% endfor %}
                                {% endif %}
                            </ul>
                        </div>
                            <input type="hidden" name="csrfmiddlewaretoken">
                            <button class="btn btn-primary " name="acceptButton" value="accept" style="float: right; margin-right: 20px; {% if error %} display:none; {%endif%}" onclick="acceptChanges(window.location.toString().split('/')[window.location.toString().split('/').length-1], '{{ csrf_token }}')">Принять изменения</button>
                    </div>
                </div>
        </div>
    </div>
    <div class="container container-fluid">
    {% if not error %}
    <div class="panel panel-default">
        <button class="accordion ac-check">
                    <span class="badge my-badge badge-Checked"> </span>
                    <em class="fa fa-refresh refresh"></em>
                Checked
            </button>
            <div class="my-panel">
                <table class="table table-striped">
                    <thead>
                        <tr>
                          <th>#</th>
                          <th>
                              В карантин
                          </th>
                          <th>Путь к файлу</th>
                          <th>Расширение</th>
                          <th>Дата</th>
                        </tr>
                        <tbody id = "Checked">
                        </tbody>
                    </thead>
                </table>
            </div>
            <button class="accordion ac-remov">
                    <span class="badge my-badge badge-Removed"> </span>
                    <em class="fa fa-refresh refresh"></em>
                Removed
            </button>
            <div class="my-panel">
                <table class="table table-striped">
                    <thead>
                        <tr>
                          <th>#</th>
                          <th>
                              Игнорировать
                          </th>
                          <th>Путь к файлу</th>
                          <th>Расширение</th>
                          <th>Дата</th>
                        </tr>
                        <tbody id = "Removed">
                        </tbody>
                    </thead>
                </table>
            </div>
            <button class="accordion ac-changed">
                    <span class="badge my-badge badge-Changed"> </span>
                    <em class="fa fa-refresh refresh"></em>
                Changed
            </button>
            <div class="my-panel">
                <table class="table table-striped">
                    <thead>
                        <tr>
                          <th>#</th>
                          <th>
                              Игнорировать
                          </th>
                          <th>Путь к файлу</th>
                          <th>Расширение</th>
                          <th>Дата</th>
                        </tr>
                        <tbody id = "Changed">
                        </tbody>
                    </thead>
                </table>
            </div>
            <button class="accordion ac-new">
                    <span class="badge my-badge badge-New"> </span>
                    <em class="fa fa-refresh refresh"></em>
                New
            </button>
            <div class="my-panel">
                <table class="table table-striped">
                    <thead>
                        <tr>
                          <th>#</th>
                          <th>
                              Игнорировать
                          </th>
                          <th>Путь к файлу</th>
                          <th>Расширение</th>
                          <th>Дата</th>
                        </tr>
                        <tbody id = "New">
                        </tbody>
                    </thead>
                </table>
            </div>
    </div>
    {% else %}
            <div class="panel panel-default">
                <div class="panel-body">
                    <h1>У пользователя <strong>{{user}}</strong> нету файлов :(</h1>
                    <p>Возможно, стоит вернуться на <a href="/">главную?</a>...<br>Или почитать цитатку? Ы</p>
                    <div class="row my-row">
                        <div class="col md-5 center">
                        {{ quote|regex_replace('(<\/br>)+<', '<br><')|safe }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    </div>
</body>
</html>